require("../../../../common/manifest.js")
require("../../../../common/vendor.js")
global.webpackJsonpMpvue([104],{

/***/ 314:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_vue__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__index__ = __webpack_require__(315);



var app = new __WEBPACK_IMPORTED_MODULE_0_vue___default.a(__WEBPACK_IMPORTED_MODULE_1__index__["a" /* default */]);
app.$mount();

/***/ }),

/***/ 315:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_mpvue_loader_2_0_1_mpvue_loader_lib_selector_type_script_index_0_index_vue__ = __webpack_require__(317);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_mpvue_loader_2_0_1_mpvue_loader_lib_template_compiler_index_id_data_v_76b6d63d_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_fileExt_template_wxml_script_js_style_wxss_platform_wx_node_modules_mpvue_loader_2_0_1_mpvue_loader_lib_selector_type_template_index_0_index_vue__ = __webpack_require__(326);
var disposed = false
function injectStyle (ssrContext) {
  if (disposed) return
  __webpack_require__(316)
}
var normalizeComponent = __webpack_require__(0)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-76b6d63d"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_mpvue_loader_2_0_1_mpvue_loader_lib_selector_type_script_index_0_index_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_mpvue_loader_2_0_1_mpvue_loader_lib_template_compiler_index_id_data_v_76b6d63d_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_fileExt_template_wxml_script_js_style_wxss_platform_wx_node_modules_mpvue_loader_2_0_1_mpvue_loader_lib_selector_type_template_index_0_index_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)
Component.options.__file = "src\\pages\\center\\appointment\\orderHouse\\index.vue"
if (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== "default" && key.substr(0, 2) !== "__"})) {console.error("named exports are not supported in *.vue files.")}
if (Component.options.functional) {console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.")}

/* hot reload */
if (false) {(function () {
  var hotAPI = require("vue-loader/node_modules/vue-hot-reload-api")
  hotAPI.install(require("vue"), false)
  if (!hotAPI.compatible) return
  module.hot.accept()
  if (!module.hot.data) {
    hotAPI.createRecord("data-v-76b6d63d", Component.options)
  } else {
    hotAPI.reload("data-v-76b6d63d", Component.options)
  }
  module.hot.dispose(function (data) {
    disposed = true
  })
})()}

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 316:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 317:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_assign__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_assign__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_center_chooseDate__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils___ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__mixins_wxValidateMixin_js__ = __webpack_require__(29);





//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//




/* harmony default export */ __webpack_exports__["a"] = ({
  mixins: [__WEBPACK_IMPORTED_MODULE_7__mixins_wxValidateMixin_js__["a" /* default */]],
  data: function data() {
    return {
      monthChoose: '',
      roomType: '',
      roomTypeRange: [],
      priceValue: 1,
      priceRange: [{ listTitle: '1500元以下', range: '0,1500' }, { listTitle: '1500-2000元', range: '1500,2000' }, { listTitle: '2000-2500元', range: '2000,2500' }, { listTitle: '2500-3000元', range: '2500,3000' }, { listTitle: '3000-3500元', range: '3000,3500' }, { listTitle: '3500-4000元', range: '3500,4000' }, { listTitle: '4000元以上', range: '4000,10000' }],
      dataObj: {
        imageUrl: ''
      },
      isDisabled: false,
      paramsObj: {
        communityId: '',
        communityName: '',
        name: '',
        phone: '',
        meetTime: '',
        detailTime: '',
        arrivalDate: '',
        priceMin: '',
        priceMax: '',
        houseStyleId: ''
      },
      houseTypeList: []
    };
  },

  components: { ChooseDate: __WEBPACK_IMPORTED_MODULE_5__components_center_chooseDate__["a" /* default */] },
  onUnload: function onUnload() {
    var source = this.$root.$mp.query.source;

    if (source) {
      global.mpvue.navigateBack({
        delta: 1
      });
    } else {
      global.mpvue.switchTab({
        url: '/pages/home/index/main'
      });
    }
  },
  onShow: function onShow() {
    // 初始化数据
    this.roomTypeRange = [];
    this.houseTypeList = [];
    this.initData();
  },

  methods: {
    initData: function initData() {
      var _this = this;

      return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function _callee() {
        var _ref, name, phone, queryData, ruleList;

        return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _ref = Object(__WEBPACK_IMPORTED_MODULE_6__utils___["l" /* mpvueGetStorageSync */])('memberObj') || _this.paramsObj, name = _ref.memberRealName, phone = _ref.phone;

                _this.paramsObj = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_assign___default()({}, _this.paramsObj, {
                  name: name, phone: phone
                });
                queryData = _this.$root.$mp.query.queryData;

                _this.dataObj = queryData && JSON.parse(queryData);
                console.log(_this.dataObj);
                _this.getCoverImage();
                _this.getDate();
                _this.getHouseType();
                _this.checkDataCells();

                ruleList = [{ key: 'name', description: '请输入你的姓名' }, { key: 'phone', description: '请输入你的联系电话' }];

                _this.initValidate(ruleList);

              case 11:
              case 'end':
                return _context.stop();
            }
          }
        }, _callee, _this);
      }))();
    },
    getDate: function getDate() {
      var myDate = new Date(); // 获取系统当前时间
      this.dataObj.date = Object(__WEBPACK_IMPORTED_MODULE_6__utils___["f" /* getNowFormatDate */])();
      this.dataObj.time = myDate.getHours() + ':' + myDate.getMinutes();
    },
    getHouseType: function getHouseType() {
      var _this2 = this;

      var obj = {
        communityId: this.dataObj.communityId
      };
      this.$API.queryList(obj).then(function (_ref2) {
        var _ref3 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref2, 2),
            res = _ref3[0],
            msg = _ref3[1];

        _this2.houseTypeList = res;
        res.map(function (item, index) {
          _this2.roomTypeRange.push(item.houseStyleName);
        });
      });
    },
    getCoverImage: function getCoverImage() {
      var _this3 = this;

      var communityId = this.dataObj.communityId;
      this.$API.queryCommunitiesDetail({ ids: [communityId] }).then(function (_ref4) {
        var _ref5 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref4, 2),
            res = _ref5[0],
            msg = _ref5[1];

        _this3.dataObj = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_assign___default()({}, _this3.dataObj, {
          imageUrl: res[0]['imageUrl'],
          detailAddress: res[0]['detailAddress']
        });
      });
    },
    submitFunction: function submitFunction() {
      var _this4 = this;

      return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function _callee2() {
        var result, FinalMeetTime, _mpvueGetStorageSync, memberId, arr, normalImg, uploadObj;

        return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return _this4.checkDataCells();

              case 2:
                result = _context2.sent;

                if (result) {
                  _this4.isDisabled = true;
                  FinalMeetTime = _this4.paramsObj.meetTime + ' ' + _this4.paramsObj.detailTime + ':00';
                  _mpvueGetStorageSync = Object(__WEBPACK_IMPORTED_MODULE_6__utils___["l" /* mpvueGetStorageSync */])('memberObj'), memberId = _mpvueGetStorageSync.memberId;

                  if (_this4.paramsObj.priceMin === '') {
                    arr = _this4.priceRange[_this4.priceValue].range.split(',');

                    _this4.paramsObj.priceMin = Number(arr[0]);
                    _this4.paramsObj.priceMax = Number(arr[1]);
                  }
                  normalImg = 'http://dev.qcloudcos.plateno.cc/usr/wowqu/image/test/houseType/115c77d16bca43be9f917cca85b81340.jpg';
                  uploadObj = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({
                    memberId: memberId,
                    communityPicture: _this4.dataObj.imageUrl || normalImg,
                    detailAddress: _this4.dataObj.detailAddress,
                    memberPriceMax: _this4.dataObj.maxMemberPrice,
                    memberPriceMin: _this4.dataObj.minMemberPrice,
                    originalPrice: _this4.dataObj.minRentPrice,
                    gender: 1,
                    period: 5
                  }, _this4.paramsObj);

                  uploadObj['arrivalDate'] = _this4.paramsObj.arrivalDate.split('/').join('-');
                  uploadObj['meetTime'] = FinalMeetTime.split('/').join('-');
                  uploadObj['communityId'] = _this4.dataObj.communityId;
                  uploadObj['communityName'] = _this4.dataObj.communityName;
                  _this4.$API.addSeeRoomOrder(uploadObj).then(function (_ref6) {
                    var _ref7 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref6, 2),
                        res = _ref7[0],
                        msg = _ref7[1];

                    _this4.Tracks.pageSaveParams({ serial: 10 });
                    _this4.isDisabled = false;
                    global.mpvue.navigateBack({
                      delta: 3,
                      success: function success() {
                        var url = '/pages/center/appointment/index/main';
                        var skipType = 0;
                        Object(__WEBPACK_IMPORTED_MODULE_6__utils___["t" /* showSuccessToast */])({ msg: msg, url: url, skipType: skipType });
                      }
                    });
                  });
                }

              case 4:
              case 'end':
                return _context2.stop();
            }
          }
        }, _callee2, _this4);
      }))();
    },
    priceChange: function priceChange(event) {
      this.priceValue = event.mp.detail.value;
      var arr = this.priceRange[event.mp.detail.value].range.split(',');
      this.paramsObj.priceMin = Number(arr[0]);
      this.paramsObj.priceMax = Number(arr[1]);
    },
    getHouseTypeChange: function getHouseTypeChange(e) {
      var _this5 = this;

      this.paramsObj.houseStyleId = '';
      this.roomType = e.mp.detail.value;
      this.houseTypeList.filter(function (item, index) {
        if (_this5.roomTypeRange[_this5.roomType] === item.houseStyleName) {
          _this5.paramsObj.houseStyleId = item.houseStyleId;
          _this5.paramsObj.houseStyleName = item.houseStyleName;
        }
      });
    },
    getArrivalDateChange: function getArrivalDateChange(e, SIGN) {
      this.paramsObj[SIGN] = e.mp.detail.value;
      console.log(this.paramsObj);
      this.checkDataCells();
    },
    getDateAndTime: function getDateAndTime(param) {
      console.log(param);

      var _ref8 = param || {},
          date = _ref8.date,
          time = _ref8.time;

      this.paramsObj = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_assign___default()(this.paramsObj, {
        meetTime: date,
        detailTime: time
      });
    },
    checkDataCells: function checkDataCells(e) {
      this.isDisabled = false;
      var _paramsObj = this.paramsObj,
          phone = _paramsObj.phone,
          name = _paramsObj.name,
          meetTime = _paramsObj.meetTime,
          detailTime = _paramsObj.detailTime;

      if (Object(__WEBPACK_IMPORTED_MODULE_6__utils___["h" /* isEmpty */])(phone) || Object(__WEBPACK_IMPORTED_MODULE_6__utils___["h" /* isEmpty */])(name) || Object(__WEBPACK_IMPORTED_MODULE_6__utils___["h" /* isEmpty */])(meetTime) || Object(__WEBPACK_IMPORTED_MODULE_6__utils___["h" /* isEmpty */])(detailTime)) {
        this.isDisabled = true;
        return false;
      } else {
        return true;
      }
    }
  }
});

/***/ }),

/***/ 326:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('form', {
    staticClass: "order-content",
    attrs: {
      "eventid": '6'
    },
    on: {
      "submit": _vm.checkForm
    }
  }, [_c('div', {
    staticClass: "order-body"
  }, [_c('div', {
    staticClass: "header-content"
  }, [_c('image', {
    staticClass: "room-img",
    attrs: {
      "src": _vm.dataObj.imageUrl
    }
  }), _vm._v(" "), _c('div', {
    staticClass: "state-box"
  }, [_c('div', {
    staticClass: "title"
  }, [_vm._v(_vm._s(_vm.dataObj.communityName))]), _vm._v(" "), _c('div', [_c('p', {
    staticClass: "normal-price"
  }, [_vm._v("挂牌价：￥" + _vm._s(_vm.dataObj.minRentPrice) + "/月起")]), _vm._v(" "), _c('p', {
    staticClass: "mebmber-price"
  }, [_vm._v("会员价："), _c('span', {
    staticClass: "red"
  }, [_vm._v("￥" + _vm._s(_vm.dataObj.minMemberPrice) + "-" + _vm._s(_vm.dataObj.maxMemberPrice))]), _vm._v("/月")])], 1)])]), _vm._v(" "), _c('div', {
    staticClass: "message-content"
  }, [_c('p', {
    staticClass: "label-title"
  }, [_vm._v("基本信息")]), _vm._v(" "), _c('div', {}, [_c('div', {
    staticClass: "space-box"
  }, [_c('p', [_vm._v("您的姓名")]), _vm._v(" "), _c('p', {
    staticClass: "right-box"
  }, [_c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.paramsObj.name),
      expression: "paramsObj.name"
    }],
    staticClass: "inputClass",
    attrs: {
      "type": "text",
      "name": "name",
      "placeholder": "请输入您的姓名",
      "placeholder-class": "plClass",
      "eventid": '0'
    },
    domProps: {
      "value": (_vm.paramsObj.name)
    },
    on: {
      "blur": _vm.checkDataCells,
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.paramsObj.name = $event.target.value
      }
    }
  })])], 1), _vm._v(" "), _c('div', {
    staticClass: "space-box"
  }, [_c('p', [_vm._v("联系电话")]), _vm._v(" "), _c('p', {
    staticClass: "right-box"
  }, [_c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.paramsObj.phone),
      expression: "paramsObj.phone"
    }],
    staticClass: "inputClass",
    attrs: {
      "type": "text",
      "name": "phone",
      "placeholder": "请输入您的联系电话",
      "placeholder-class": "plClass",
      "eventid": '1'
    },
    domProps: {
      "value": (_vm.paramsObj.phone)
    },
    on: {
      "blur": _vm.checkDataCells,
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.paramsObj.phone = $event.target.value
      }
    }
  })])], 1), _vm._v(" "), _c('ChooseDate', {
    attrs: {
      "eventid": '2',
      "mpcomid": '0'
    },
    on: {
      "getDateChange": _vm.getDateAndTime
    }
  })], 1), _vm._v(" "), _c('p', {
    staticClass: "label-title"
  }, [_vm._v("更多信息"), _c('span', {
    staticClass: "small-font"
  }, [_vm._v("非必须")])]), _vm._v(" "), _c('div', {}, [_c('picker', {
    attrs: {
      "mode": "date",
      "start": _vm.dataObj.date,
      "end": "2022-01-01",
      "eventid": '3'
    },
    on: {
      "change": function($event) {
        _vm.getArrivalDateChange($event, 'arrivalDate')
      }
    }
  }, [_c('div', {
    staticClass: "box"
  }, [_c('div', {
    staticClass: "box-left"
  }, [_c('p', {
    staticClass: "title"
  }, [_vm._v("期望入住时间")])], 1), _vm._v(" "), _c('div', {
    staticClass: "box-right"
  }, [(!_vm.paramsObj.arrivalDate) ? _c('p', {
    staticClass: "plState mr_10"
  }, [_vm._v("请选择期望入住时间")]) : _vm._e(), _vm._v(" "), _c('p', {
    staticClass: "state mr_10"
  }, [_vm._v(_vm._s(_vm.paramsObj.arrivalDate))])], 1)])]), _vm._v(" "), _c('picker', {
    attrs: {
      "value": _vm.priceValue,
      "range": _vm.priceRange,
      "range-key": 'listTitle',
      "eventid": '4'
    },
    on: {
      "change": _vm.priceChange
    }
  }, [_c('div', {
    staticClass: "box"
  }, [_c('div', {
    staticClass: "box-left"
  }, [_c('p', {
    staticClass: "title"
  }, [_vm._v("租金预算")])], 1), _vm._v(" "), _c('div', {
    staticClass: "box-right"
  }, [(!_vm.priceValue) ? _c('p', {
    staticClass: "plState mr_10"
  }, [_vm._v("请选择租金预算")]) : _vm._e(), _vm._v(" "), _c('p', {
    staticClass: "state mr_10"
  }, [_vm._v(_vm._s(_vm.priceRange[_vm.priceValue].listTitle))])], 1)])]), _vm._v(" "), _c('picker', {
    attrs: {
      "value": _vm.roomType,
      "range": _vm.roomTypeRange,
      "eventid": '5'
    },
    on: {
      "change": _vm.getHouseTypeChange
    }
  }, [_c('div', {
    staticClass: "box"
  }, [_c('div', {
    staticClass: "box-left"
  }, [_c('p', {
    staticClass: "title"
  }, [_vm._v("意向房型")])], 1), _vm._v(" "), _c('div', {
    staticClass: "box-right"
  }, [(!_vm.roomType) ? _c('p', {
    staticClass: "plState mr_10"
  }, [_vm._v("请选择意向房型")]) : _c('p', {
    staticClass: "state mr_10"
  }, [_vm._v(_vm._s(_vm.roomTypeRange[_vm.roomType]))])], 1)])])], 1)], 1)]), _vm._v(" "), _c('div', {
    staticClass: "order-footer"
  }, [_c('p', [_c('button', {
    staticClass: "sure-submit-button",
    class: _vm.isDisabled ? 'garyBack' : '',
    attrs: {
      "formType": "submit"
    }
  }, [_vm._v("立即预约")])], 1)], 1)])
}
var staticRenderFns = []
render._withStripped = true
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);
if (false) {
  module.hot.accept()
  if (module.hot.data) {
     require("vue-loader/node_modules/vue-hot-reload-api").rerender("data-v-76b6d63d", esExports)
  }
}

/***/ })

},[314]);